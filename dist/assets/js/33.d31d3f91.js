(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{243:function(a,t,i){"use strict";i.r(t);var e=i(0),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[i("blockquote",[i("p",[a._v("话不多说，先上图")])]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/3357019-75da56f8eab783b4.gif?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"demo"}})]),a._v(" "),i("blockquote",[i("p",[a._v("背景：\n本人在做图书demo的一个项目的时候，发现加载详情页的时候，出现了一个大大的红色NaN，等到数据返回后才会变为正常值，像这样：")])]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/3357019-055fe8fc8e9ebc06.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"大大的NaN"}})]),a._v(" "),i("h5",{attrs:{id:"怎么解决？"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#怎么解决？","aria-hidden":"true"}},[a._v("#")]),a._v(" 怎么解决？")]),a._v(" "),i("p",[a._v("相信很多童鞋就会说用 v-if/v-show 等到数据返回来之后在展示。\n没错，笔者之前就是这么干的，但是还是会出现数据加载回来之前出现局部空白。那么有没有办法可以改善呢？下面介绍下笔者的解决办法，方法略显粗糙，请笑纳！")]),a._v(" "),i("h6",{attrs:{id:"解决灵感"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#解决灵感","aria-hidden":"true"}},[a._v("#")]),a._v(" 解决灵感")]),a._v(" "),i("p",[a._v("记得之前老大在群里说研究一下饿了吗的这个技术：")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/3357019-63e7dcffb99c8d56.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"饿了吗"}})]),a._v(" "),i("p",[a._v("所以给我这个方案带来了灵感，不妨在在数据加载之前预先渲染用一个设定好样式的元素试试呢。")]),a._v(" "),i("h5",{attrs:{id:"说干就干"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#说干就干","aria-hidden":"true"}},[a._v("#")]),a._v(" 说干就干")]),a._v(" "),i("h6",{attrs:{id:"用啥做？"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#用啥做？","aria-hidden":"true"}},[a._v("#")]),a._v(" 用啥做？")]),a._v(" "),i("p",[a._v("vue有没有什么可以直接操作dom的？我一下想到了vue的自定义指令。")]),a._v(" "),i("h6",{attrs:{id:"思路"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#思路","aria-hidden":"true"}},[a._v("#")]),a._v(" 思路")]),a._v(" "),i("p",[a._v("在数据返回之前，先加载一个预先设定的样式（pre）元素，等到数据返回之后再替换真实（real）元素。对就是这么简单！")]),a._v(" "),i("h6",{attrs:{id:"代码实现"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#代码实现","aria-hidden":"true"}},[a._v("#")]),a._v(" 代码实现")]),a._v(" "),i("p",[a._v("1.我们先定义一个样式接口")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/3357019-2d5e7d84fb251002.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"样式定义"}})]),a._v(" "),i("p",[a._v("2.定义模板")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/3357019-9c9ad9bd9b4bc340.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"模板"}})]),a._v(" "),i("p",[a._v("3.我们把模板插到我们挂载的元素上")]),a._v(" "),i("pre",[i("code",[a._v("el.innerHTML = template;\n")])]),a._v(" "),i("p",[a._v("4.数据返回后替换模板（手法比较粗糙 QAQ）")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/3357019-e669cbf15ce13f5d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"image.png"}})]),a._v(" "),i("p",[a._v("到这里一切看起来都是很美好，但是我们忽略了一个问题，如果你的style是这样的")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/3357019-027d5caf422e10fe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"style"}})]),a._v(" "),i("p",[a._v("并且你想要render一个html，像这样")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/3357019-1d04e10ce8e8941f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"rederHTML"}})]),a._v(" "),i("p",[a._v("我们再试一下")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/3357019-1d2700cad1abfac7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"样式"}})]),a._v(" "),i("p",[a._v("咦？！我们的样式哪去了?  检查元素看看")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/3357019-2bdfcf3cff67888c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"检查元素"}})]),a._v(" "),i("p",[a._v("原来我们丢失一个属性，如有不懂可参考本人写的《css模块化》一文。")]),a._v(" "),i("p",[a._v("接下来我们继续")]),a._v(" "),i("p",[a._v("5.获取属性")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/3357019-dceb2ab89b5a6508.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"获取属性"}})]),a._v(" "),i("p",[a._v("6.重新编译模板，添加属性")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/3357019-348f62d26c04a606.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"编译"}})]),a._v(" "),i("p",[a._v("7.最后一步，添加监听")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/3357019-429d7baf7a82b29d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"监听"}})]),a._v(" "),i("p",[a._v("8.挂载自定义指令在vue上")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/3357019-eac99c135f16c23a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"image.png"}})]),a._v(" "),i("h5",{attrs:{id:"怎么用？"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#怎么用？","aria-hidden":"true"}},[a._v("#")]),a._v(" 怎么用？")]),a._v(" "),i("p",[a._v("用法1")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/3357019-faf94ba898fe46c8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"直接输入变量，全部使用默认"}})]),a._v(" "),i("p",[a._v("用法2")]),a._v(" "),i("p",[i("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/3357019-a319f7cdc69582bd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"使用对象，可以扩展自定义属性，包括行数和style"}})]),a._v(" "),i("h5",{attrs:{id:"后记"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#后记","aria-hidden":"true"}},[a._v("#")]),a._v(" 后记")]),a._v(" "),i("p",[a._v("时间原因，写的比较糙，还有很多需要改进的地方，希望观众老爷多多提些建议哈")])])}),[],!1,null,null,null);t.default=r.exports}}]);